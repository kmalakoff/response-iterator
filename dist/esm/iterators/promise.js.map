{"version":3,"file":"promise.js","names":["hasIterator","Symbol","asyncIterator","promiseIterator","promise","resolved","iterator","next","Promise","resolve","value","undefined","done","reject","then","catch"],"sources":["../../../src/iterators/promise.ts"],"sourcesContent":["const hasIterator = typeof Symbol !== \"undefined\" && Symbol.asyncIterator;\n\n/* c8 ignore start */\nexport default function promiseIterator<T>(promise): AsyncIterableIterator<T> {\n  let resolved = false;\n\n  const iterator = {\n    next(): Promise<IteratorResult<T, boolean>> {\n      if (resolved) return Promise.resolve({ value: undefined, done: true });\n      resolved = true;\n      return new Promise(function (resolve, reject) {\n        promise\n          .then(function (value) {\n            resolve({ value, done: false });\n          })\n          .catch(reject);\n      });\n    },\n  };\n\n  if (hasIterator) {\n    iterator[Symbol.asyncIterator] = function (): AsyncIterator<T> {\n      return this;\n    };\n  }\n\n  return iterator as AsyncIterableIterator<T>;\n}\n/* c8 ignore stop */\n"],"mappings":"AAAA,MAAMA,WAAW,GAAG,OAAOC,MAAP,KAAkB,WAAlB,IAAiCA,MAAM,CAACC,aAA5D;AAEA;;AACA,eAAe,SAASC,eAAT,CAA4BC,OAA5B,EAA+D;EAC5E,IAAIC,QAAQ,GAAG,KAAf;EAEA,MAAMC,QAAQ,GAAG;IACfC,IAAI,GAAwC;MAC1C,IAAIF,QAAJ,EAAc,OAAOG,OAAO,CAACC,OAAR,CAAgB;QAAEC,KAAK,EAAEC,SAAT;QAAoBC,IAAI,EAAE;MAA1B,CAAhB,CAAP;MACdP,QAAQ,GAAG,IAAX;MACA,OAAO,IAAIG,OAAJ,CAAY,UAAUC,OAAV,EAAmBI,MAAnB,EAA2B;QAC5CT,OAAO,CACJU,IADH,CACQ,UAAUJ,KAAV,EAAiB;UACrBD,OAAO,CAAC;YAAEC,KAAF;YAASE,IAAI,EAAE;UAAf,CAAD,CAAP;QACD,CAHH,EAIGG,KAJH,CAISF,MAJT;MAKD,CANM,CAAP;IAOD;;EAXc,CAAjB;;EAcA,IAAIb,WAAJ,EAAiB;IACfM,QAAQ,CAACL,MAAM,CAACC,aAAR,CAAR,GAAiC,YAA8B;MAC7D,OAAO,IAAP;IACD,CAFD;EAGD;;EAED,OAAOI,QAAP;AACD;AACD"}