!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).responseIterator=n()}(this,(function(){"use strict";var e="undefined"!=typeof Symbol&&Symbol.asyncIterator;function n(n){var r=null,o=null,t=!1,i=[],a=[];function u(e){if(!o)return a.length?a.shift()[0]({value:e,done:!1}):void i.push(e)}function f(e){o=e,a.slice().forEach((function(n){n[1](e)})),!r||r()}function s(){t=!0,a.slice().forEach((function(e){e[0]({value:void 0,done:!0})})),!r||r()}r=function(){r=null,n.removeListener("data",u),n.removeListener("error",f),n.removeListener("end",s),n.removeListener("finish",s),n.removeListener("close",s)},n.on("data",u),n.on("error",f),n.on("end",s),n.on("finish",s),n.on("close",s);var d={next:function(){return new Promise((function(e,n){return o?n(o):i.length?e({value:i.shift(),done:!1}):t?e({value:void 0,done:!0}):void a.push([e,n])}))}};return e&&(d[Symbol.asyncIterator]=function(){return this}),d}var r="undefined"!=typeof Symbol&&Symbol.asyncIterator;var o="undefined"!=typeof Symbol&&Symbol.asyncIterator;function t(e){var n={next:function(){return e.read()}};return o&&(n[Symbol.asyncIterator]=function(){return this}),n}var i="undefined"!=typeof Symbol&&Symbol.asyncIterator;return function(e){if(void 0===e)throw new Error("Missing response for responseIterator");var o,a,u=e;if(e.body?u=e.body:e.data?u=e.data:e._bodyBlob&&(u=e._bodyBlob),i&&u[Symbol.asyncIterator])return a=u[Symbol.asyncIterator](),(o={next:function(){return a.next()}})[Symbol.asyncIterator]=function(){return this},o;if(u.getReader)return t(u.getReader());if(u.stream)return t(u.stream().getReader());if(u.arrayBuffer)return function(e){var n=!1,o={next:function(){return n?Promise.resolve({value:void 0,done:!0}):(n=!0,new Promise((function(n,r){e.then((function(e){n({value:e,done:!1})})).catch(r)})))}};return r&&(o[Symbol.asyncIterator]=function(){return this}),o}(u.arrayBuffer());if(u.pipe)return n(u);throw new Error("Unknown body type for responseIterator. Maybe you are not passing a streamable response")}}));
//# sourceMappingURL=response-iterator.min.js.map
